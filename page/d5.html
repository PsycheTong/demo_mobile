<!DOCTYPE html>
<html>

	<head lang="en">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,minimal-ui">
		<title>注销事件</title>

		<style type="text/css">
			html,body {
				margin: 0;
				width: 100%;
				height: 100%;
				overflow: hidden;
			}
			
			#mapContainer {
				width: 100%;
				height: 100%;
				overflow: hidden;
			}
		</style>
		<script type="text/javascript" src="../js/JSWrap.js"></script>
		<script>
			var map;
			var clickListener;
			function mapInit() {
				map = new CMMap.Map("mapContainer", {zoom:13});
			}

	
     function addEvent() {
        removeEvent(); //防止重复绑定
        clickListener = CMMap.event.addListener(map, "click", function(e) {
			alert('您在[ ' + e.lnglat.getLng() + ',' + e.lnglat.getLat() + ' ]的位置点击了地图！');
		});
		alert('已注册点击事件');
    };
	
    function removeEvent() {
        if (clickListener) {
            CMMap.event.removeListener(clickListener);//移除事件，以绑定时返回的对象作为参数
            alert('点击事件已移除');	
        }
    };   

    if (window.attachEvent) {
      window.attachEvent("onload", mapInit);//IE
    } else {
        window.addEventListener("load", mapInit, false);//FF
    }
		</script>
	</head>

	<body >
		<div style="position: absolute;left:10px;top:10px;z-index:10">
			<button onclick="addEvent();" style="float: left;">添加点击事件</button>
		    <button onclick="removeEvent();" style="float: left;">移除点击事件</button>
		</div>
		<div id="mapContainer" style="position: relative;"></div>

	</body>

</html>